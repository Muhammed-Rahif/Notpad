import{O as x,P as E,Q as f,f as I,q as m,H as L,i as F,j as p,k as K,t as N,v as O,M as B,m as v,o as V,R as se,E as re,T as ae,U as ie,I as ce,V as D,W as y,X as S,b as le,Y as de,Z as me,d as ue}from"./svelte-9THILXAE.js";let H,P;function J(n){if(typeof document>"u")return;clearTimeout(H),clearTimeout(P);const e=document.createElement("style"),o=document.createTextNode(`* {
     -webkit-transition: none !important;
     -moz-transition: none !important;
     -o-transition: none !important;
     -ms-transition: none !important;
     transition: none !important;
  }`);e.appendChild(o);const t=()=>document.head.appendChild(e),i=()=>document.head.removeChild(e);if(typeof window.getComputedStyle<"u"){t(),n(),window.getComputedStyle(e).opacity,i();return}if(typeof window.requestAnimationFrame<"u"){t(),n(),window.requestAnimationFrame(i);return}t(),H=window.setTimeout(()=>{n(),P=window.setTimeout(i,120)},120)}function Q(n){return n.filter(e=>e.length>0)}const R={getItem:n=>null,setItem:(n,e)=>{}},h=typeof document<"u",fe=["dark","light","system"],k=f("mode-watcher-mode"),M=f("mode-watcher-theme"),A=ge(),C=Se(),W=f(void 0),X=ye(),q=f(!0),Y=f([]),Z=f([]),G=be(),he=ve();function ge(){const n="system",e=h?localStorage:R,o=e.getItem(i());let t=T(o)?o:n;function i(){return E(k)}const{subscribe:c,set:r}=f(t,()=>{if(!h)return;const s=l=>{if(l.key!==i())return;const d=l.newValue;T(d)?r(t=d):r(t=n)};return addEventListener("storage",s),()=>removeEventListener("storage",s)});function a(s){r(t=s),e.setItem(i(),t)}return{subscribe:c,set:a}}function ye(){const n=h?localStorage:R,e=n.getItem(t());let o=e??"";function t(){return E(M)}const{subscribe:i,set:c}=f(o,()=>{if(!h)return;const a=s=>{if(s.key!==t())return;const l=s.newValue;c(l===null?o="":o=l)};return addEventListener("storage",a),()=>removeEventListener("storage",a)});function r(a){c(o=a),n.setItem(t(),o)}return{subscribe:i,set:r}}function Se(){let e=!0;const{subscribe:o,set:t}=f(void 0,()=>{if(!h)return;const r=s=>{e&&t(s.matches?"light":"dark")},a=window.matchMedia("(prefers-color-scheme: light)");return a.addEventListener("change",r),()=>a.removeEventListener("change",r)});function i(){if(!h)return;const r=window.matchMedia("(prefers-color-scheme: light)");t(r.matches?"light":"dark")}function c(r){e=r}return{subscribe:o,query:i,tracking:c}}function be(){const{subscribe:n}=x([A,C,W,q,Y,Z],([e,o,t,i,c,r])=>{if(!h)return;const a=e==="system"?o:e,s=Q(c),l=Q(r);function d(){const u=document.documentElement,g=document.querySelector('meta[name="theme-color"]');a==="light"?(s.length&&u.classList.remove(...s),l.length&&u.classList.add(...l),u.style.colorScheme="light",g&&t&&g.setAttribute("content",t.light)):(l.length&&u.classList.remove(...l),s.length&&u.classList.add(...s),u.style.colorScheme="dark",g&&t&&g.setAttribute("content",t.dark))}return i?J(d):d(),a});return{subscribe:n}}function ve(){const{subscribe:n}=x([X,q],([e,o])=>{if(!h)return;function t(){document.documentElement.setAttribute("data-theme",e)}return o?J(t):t(),e});return{subscribe:n}}function T(n){return typeof n!="string"?!1:fe.includes(n)}function pe(){A.set(E(G)==="dark"?"light":"dark")}function we(n){A.set(n)}function _e(n){X.set(n)}function ke({defaultMode:n="system",themeColors:e,darkClassNames:o=["dark"],lightClassNames:t=[],defaultTheme:i="",modeStorageKey:c="mode-watcher-mode",themeStorageKey:r="mode-watcher-theme"}){const a=document.documentElement,s=localStorage.getItem(c)||n,l=localStorage.getItem(r)||i,d=s==="light"||s==="system"&&window.matchMedia("(prefers-color-scheme: light)").matches;if(d?(o.length&&a.classList.remove(...o),t.length&&a.classList.add(...t)):(t.length&&a.classList.remove(...t),o.length&&a.classList.add(...o)),a.style.colorScheme=d?"light":"dark",e){const u=document.querySelector('meta[name="theme-color"]');u&&u.setAttribute("content",s==="light"?e.light:e.dark)}l&&(a.setAttribute("data-theme",l),localStorage.setItem(r,l)),localStorage.setItem(c,s)}var Me=N('<meta name="theme-color">');function Ce(n,e){I(e,!1);let o=m(e,"themeColors",24,()=>{});L();var t=F(),i=p(t);K(i,o,c=>{var r=Me();O(()=>B(r,"content",o().dark)),v(c,r)}),v(n,t),V()}var Te=N('<meta name="theme-color">'),Ee=N("<!> <!>",1);function Ie(n,e){I(e,!1);let o=m(e,"trueNonce",8,""),t=m(e,"initConfig",8),i=m(e,"themeColors",24,()=>{});L(),se(c=>{var r=Ee(),a=p(r);K(a,i,l=>{var d=Te();O(()=>B(d,"content",i().dark)),v(l,d)});var s=re(a,2);ae(s,()=>`<script${o()?` nonce=${o()}`:""}>(`+ke.toString()+")("+JSON.stringify(t())+");<\/script>",!1,!1),v(c,r)}),V()}function Ke(n,e){I(e,!1);const o=ie(),t=()=>D(k,"$modeStorageKeyStore",o),i=()=>D(M,"$themeStorageKeyStore",o),c=de();let r=m(e,"track",8,!0),a=m(e,"defaultMode",8,"system"),s=m(e,"themeColors",24,()=>{}),l=m(e,"disableTransitions",8,!0),d=m(e,"darkClassNames",24,()=>["dark"]),u=m(e,"lightClassNames",24,()=>[]),g=m(e,"defaultTheme",8,""),z=m(e,"nonce",8,""),w=m(e,"themeStorageKey",8,"mode-watcher-theme"),_=m(e,"modeStorageKey",8,"mode-watcher-mode"),$=m(e,"disableHeadScriptInjection",8,!1);ce(()=>{const b=G.subscribe(()=>{}),ne=he.subscribe(()=>{});C.tracking(r()),C.query();const j=localStorage.getItem(t());we(T(j)?j:a());const oe=localStorage.getItem(i());return _e(oe||g()),()=>{b(),ne()}});const ee={defaultMode:a(),themeColors:s(),darkClassNames:d(),lightClassNames:u(),defaultTheme:g(),modeStorageKey:_(),themeStorageKey:w()};y(()=>S(l()),()=>{q.set(l())}),y(()=>S(s()),()=>{W.set(s())}),y(()=>S(d()),()=>{Y.set(d())}),y(()=>S(u()),()=>{Z.set(u())}),y(()=>S(_()),()=>{k.set(_())}),y(()=>S(w()),()=>{M.set(w())}),y(()=>S(z()),()=>{le(c,typeof window>"u"?z():"")}),me(),L();var U=F(),te=p(U);K(te,$,b=>{Ce(b,{get themeColors(){return s()}})},b=>{Ie(b,{get trueNonce(){return ue(c)},initConfig:ee,get themeColors(){return s()}})}),v(n,U),V()}export{Ke as M,G as d,pe as t};
