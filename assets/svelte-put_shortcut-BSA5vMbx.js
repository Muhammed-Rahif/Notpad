import{o as p}from"./svelte-BtZcpeKS.js";function T(n){switch(n){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function z(n,h){let{enabled:a=!0,trigger:o,type:l="keydown"}=h;function y(r){var g;const s=Array.isArray(o)?o:[o],i=[r.metaKey,r.altKey,r.shiftKey,r.ctrlKey].reduce((f,u,e)=>u?f|1<<e:f,0);for(const f of s){const u={preventDefault:!1,enabled:!0,...f},{modifier:e,key:k,callback:c,preventDefault:w,enabled:A}=u;if(A){if(r.key!==k)continue;if(e===null||e===!1){if(i!==0)continue}else if(e!==void 0&&((g=e==null?void 0:e[0])==null?void 0:g.length)>0){const D=Array.isArray(e)?e:[e];let m=!1;for(const d of D)if((Array.isArray(d)?d:[d]).reduce((E,K)=>E|T(K),0)===i){m=!0;break}if(!m)continue}w&&r.preventDefault();const b={node:n,trigger:u,originalEvent:r};n.dispatchEvent(new CustomEvent("shortcut",{detail:b})),c==null||c(b)}}}let t;return a&&(t=p(n,l,y)),{update:r=>{const{enabled:s=!0,type:i="keydown"}=r;a&&(!s||l!==i)?t==null||t():!a&&s&&(t=p(n,i,y)),a=s,l=i,o=r.trigger},destroy:()=>{t==null||t()}}}export{z as s};
